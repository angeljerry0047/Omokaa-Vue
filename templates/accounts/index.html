{% extends 'accounts/base.html' %}
{% load static %}

{% block content %}

<title>{% block title %}Omokaa | #ShareYourHustle{%endblock%}</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css"
      integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
<style>

    #stepProgressBar  {
        display:  flex;
        justify-content:  space-between;
        align-items:  flex-end;
        width:  300px;
        margin: 0 auto;
    }

    .step  {
        text-align:  center;
    }

    .step-text  {
        margin-bottom:  10px;
        color:  #0088ff;
    }

    .bullet {
        border: 1px solid #0088ff;
        height: 20px;
        width: 20px;
        border-radius: 100%;
        color: #28a745;
        display: inline-block;
        position: relative;
        transition: background-color 500ms;
        line-height:20px;
    }

    .bullet.completed  {
        color:  white;
        background-color:  #0088ff;
    }

    .bullet::after  {
        content: '';
        position: absolute;
        right: -60px;
        bottom: 10px;
        height: 1px;
        width: 54px;
        background-color: #0088ff;
    }

    .bulletLast::after{
        height:0px;
    }

    .landing, .login {
        padding: 20px 25px;
    }

    .logo {
        margin: 20px auto;
        text-align: center;
    }

    .logo img{
        width: 100%;
    }

    .landing h1 {
        font-size: 18px;
        color: #222222;
        text-align: center;
        font-family: sans-serif;
    }

    .landing h2 {
        font-size: 20px;
        color: #0088ff;
        text-align: center;
        margin: 15px auto;
        font-weight: bold;
    }

    .sign-in, .sign-up {
        background-color: #0088ff;
        border: none;
        color: white;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 18px;
        margin: 10px auto;
        border-radius: 20px;
        width: 100%;
        outline: none;
    }

    .sign-in {
        background-color: #0088ff;
        margin-top: 40px;
    }

    .sign-up {
        background-color: #666666;
        margin-top: 20px;
    }

    .account-card {
        display: none;
        width: 100%;
        background-color: white;
        border-radius: 5px;
        padding: 10px 20px;
        margin: -20px auto;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        -webkit-box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        -moz-box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }

    .login input {
        padding: 20px;
        margin: 30px auto;
    }

    .btn-login {
        width: 100%;
        background-color: #0088ff;
        border-radius: 5px;
        border: none;
        color: white;
        padding: 8px;
    }

    .signup label{
        margin-bottom: 0;
        font-weight: 500;
        color: #666666; !important;
    }

    .signup input{
        margin-top: 0;
    }

    .btn-signup {
        background-color: #666666;
        width: 50%;
        border-radius: 5px;
        border: none;
        color: white;
        padding: 8px;
        margin: 10px 25%;
        text-align: center;
    }

    .btn-forgot {
        color: #0088ff;
        font-size: 14px;
        text-align: center;
        margin: 10px auto;
        cursor: pointer;
    }


    .btn-reset {
        border-radius: 20px;
        background-color: #0088ff;
        padding: 5px 20px;
        width: 50%;
        margin: 0 25%;
        font-size: 18px;
    }

    .account-card h3 {
        font-size: 22px;
    }

    .btn-nxt {
        border-radius: 20px;
        padding: 6px 20px;
        color: white;
    }

    .signup-terms p{
        margin: 14px auto 0;
        font-size: 14px;
        text-align: center;
        color: #666666;
    }

    .signin-link p {
        margin: 0px auto 50px;
        text-align: center;
        color: #666666;
        font-size: 14px;
    }

    .signin-link a {
        color: #0088ff;
        font-size: 16px;
        font-weight: 500;
    }

    .forgot-sign {
        font-size: 16px;
        font-weight: 500;
        margin-top: 0px;
    }

    .forgot-p {
        color: #888888;
        text-align: center;
        margin-bottom: 40px;
        font-size: 14px;
    }

    .footer-menu {
        text-align: center;
    }

    .footer-menu p {
        margin: 0 auto;
        font-size: 14px;
    }

    #registration_form fieldset:not(:first-of-type) {
        display: none;
    }


    @media only screen and (max-width: 450px) {

         #stepProgressBar  {
            width:  auto;
            font-size: 12px;
        }
    }

    @media (min-width: 556px){

        .landing, .login{
            padding: 30px 100px 10px;
        }
        .logo {
            margin-top: -30px;
        }

        .logo img{
            width: 60%;
        }

        .landing h1{
            margin: 0 auto;
        }

        .landing h2 {
            font-size: 24px;
            margin: 5px auto;
        }

        .sign-in, .sign-up {
            margin: 10px auto;
            width: 100%;
        }

        .sign-in{
            margin-top: 50px;
        }

        .account-card{
            margin-top: -40px;
            width: 90%;
        }
    }

    @media (min-width: 768px) {
        body {
            background-color: #f0f2f5;
        }

        .logo img{
            width: 80%;
            margin-top: -50px;
        }

        .login {
            padding: 0px 30px;
        }

        .landing {
            padding: 20px 50px;
        }

        .logo img{
            margin: 40px auto 20px;
        }

        .landing h1 {
            font-size: 22px;
        }

        .account-card {
            width: 80%;
            padding: 30px;
            margin-top: -60px;
            display: none;
        }

        .forgot-sign{
            margin-top: 18px;
        }

    }

    @media only screen and (min-width: 992px) {

        .login {
            padding: 0 60px;
        }

        .landing {
            padding: 20px 80px
        }

        .logo img{
            width: 100%;
            margin-top: 140px;
        }

        .landing h1 {
            font-size: 26px;
            margin-top: -40px;
        }

        .landing h2 {
            font-size: 26px;
            margin: 15px auto;
        }

        .account-card{
            display: block;
            -ms-transform: translateY(-50%);
            transform: translateY(40%);
        }

        #signinLink{
            margin-top: 180px;
        }

        .signin-link p {
            margin-top: 100px;
            text-align: right;
            padding-right: 60px;
            font-size: 16px;
        }

        .signin-link a {
            font-size: 18px;
            font-weight: bold;
        }

    }

</style>

<div class="container-fluid h-100">
    <div class="row">
        <div class="col-lg-6 landing">
            <div class="logo"><img src="https://omokaa-assets.s3.us-east-2.amazonaws.com/static/logo/Final_Logo.png" alt="omokaa logo"></div>
            <div id="header">
                <h1>Omokaa values your hustle. Your hustle is another person's need.</h1>
                <h2>#ShareYourHustle</h2>
            </div>
            <button id="signinBtn" class="sign-in signin-link d-lg-none">Sign In</button>
            <button id="signupBtn" class="sign-up signup-link d-lg-none">Sign Up</button>
        </div>
        <div class="col-lg-6 login">
            <div class="">
                <div class="">
                    <div class="account-card">
                        {% if message %}
     <div id="reportAlert" class="alert alert-success alert-dismissible fade show" role="alert" style="margin-top:20px;">
        {{message}}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {% endif %}
    {% if alert_message %}
     <div id="reportAlert" class="alert alert-danger alert-dismissible fade show" role="alert" style="margin-top:20px;">
        {{alert_message}}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {% endif %}
                        <div class="signin" id="signinForm" {% if form_type == 'registeration' %}style="display:none;"{% endif%}>
                            <form method="POST" action="{% url 'login_view' %}" autocomplete="off">
                                {% csrf_token %}
                                {{login_form.email}}
                                {{login_form.password}}
                                <button type="submit" class="btn-login btn btn-primary">Sign In</button>
                            </form>
                            <p class="btn-forgot" id="forgotBtn">Forgot Password</p>
                            <hr>
                            <button class="btn-signup btn btn-secondary signup-link">Sign Up</button>
                        </div>
                        <div class="forgot" id="forgotForm" style="display: none">
                            <h3 align="center">Reset Your Password</h3>
                            <hr>
                            <p class="forgot-p">Enter the email address you used to register. We will send you
                                instructions to reset your password.</p>
                            <form method="POST" action="{% url 'password_reset' %}">
                                {% csrf_token %}
                                {{login_form.email}}
                                <button class="btn-reset btn btn-primary">Reset</button>
                            </form>
                            <p><a class="forgot-sign signup-link pull-left" href="#">Sign Up</a><a
                                    class="forgot-sign signin-link pull-right" href="#">Sign In</a></p>
                        </div>
                        <div class="signup" id="signupForm" style="{% if form_type == 'registeration' %}{% else %}display: none;{% endif %}">
                            <div id="stepProgressBar" style="margin-bottom: -16px">
                            <div class="step">
                                <div class="bullet completed" id="first_bar">1</div>
                                <p class="step-text">Account</p>
                            </div>
                            <div class="step">
                                <div class="bullet" id="second_bar">2</div>
                                <p class="step-text">About You</p>
                            </div>
                            <div class="step">
                                <div class="bullet bulletLast" id="third_bar">3</div>
                                <p class="step-text">Security</p>
                            </div>
                        </div>
                        <h3 align="center" class="m-2">Create Your Account</h3>
                            <form id="registration_form" method="POST" autocomplete="off" namevalidateurl="{% url 'validate_name_username' %}" emailvalidateurl="{% url 'validate_email_phone' %}" action="{% url 'registration_view' %}">
                                {% csrf_token %}
                                <fieldset {% if form_type == 'registeration' %}style="display:none;"{% endif%}>
                                    <div class="form-group">
                                        <label for="name">Name</label>
                                        {{registration_form.name}}
                                        <p id="nameError" style="color:#ff4300; font-size: 14px; margin: 0"></p>
                                        {% for error in registration_form.name.errors %}
                                        <p style="color:#ff4300; font-size: 14px; margin: 0">{{error}}</p>
                                        {% endfor %}
                                    </div>
                                    <div class="form-group">
                                        <label for="username">Username</label>
                                        {{registration_form.username}}
                                        <p id="userNameError" style="color:#ff4300; font-size: 14px; margin: 0"></p>
                                        {% for error in registration_form.username.errors %}
                                        <p style="color:#ff4300; font-size: 14px; margin: 0">{{error}}</p>
                                        {% endfor %}
                                    </div>
                                    <button type="button" name="password" class="btn btn-nxt btn-primary pull-right" onclick="ValidateName(event)"
                                    style="background-color: #0088ff">NEXT
                                        <div class="spinner-border spinner-border-sm text-light" role="status" id="nameSpinner" style="display:none">
                                        <span class="sr-only"></span>
                                        </div>
                                    </button>
                                </fieldset>
                                <fieldset {% if form_type == 'registeration' %}style="display:none;"{% endif%}>
                                    <div class="form-group">
                                        <label for="email">Email</label>
                                        {{registration_form.email}}
                                        <p id="emailError" style="color:#ff4300; font-size: 14px; margin: 0"></p>
                                        {% for error in registration_form.email.errors %}
                                        <p style="color:#ff4300; font-size: 14px; margin: 0">{{error}}</p>
                                        {% endfor %}
                                    </div>
                                    <div class="form-group">
                                        <label for="phone">Phone</label>
                                        {{registration_form.phone}}
                                        <p id="phoneError" style="color:#ff4300; font-size: 14px; margin: 0"></p>
                                        {% for error in registration_form.phone.errors %}
                                        <p style="color:#ff4300; font-size: 14px; margin: 0">{{error}}</p>
                                        {% endfor %}
                                    </div>
                                    <button id="first_back" type="button" name="previous" class="btn-previous btn-nxt btn btn-secondary"
                                            currentLocation="second_bar" prevLocation="first_bar" style="background-color: #666666">BACK
                                    </button>
                                    <button type="button" name="next" class="btn btn-nxt btn-primary pull-right" onclick="ValidateEmailPhone(event)"
                                    style="background-color: #0088ff">NEXT
                                         <div class="spinner-border spinner-border-sm text-light" role="status" id="emailSpinner" style="display:none">
                                        <span class="sr-only"></span>
                                        </div>
                                    </button>
                                </fieldset>
                                <fieldset {% if form_type == 'registeration' %}style="display:inherit;"{% endif%}>
                                    <div class="form-group">
                                        <label for="password1">Password</label>
                                        <input type="password" class="form-control mt-1" id="password1" name="password1"
                                               placeholder="Enter Your Password" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="password2">Confirm Password</label>
                                        <input type="password" class="form-control mt-1" name="password2" id="password2"
                                               placeholder="Re-enter Your Password" required/>
                                    </div>
                                    <p>
                                    {% for field in registration_form %}
                                    {% for error in field.errors %}
                                    <p style="color:#ff4300; font-size: 14px; margin: 0">{{error}}</p>
                                    {% endfor %}
                                    {% endfor %}
                                    </p>
                                    
                                    <p id="passError" style="color:#ff4300; font-size: 14px; margin: 0"></p>

                                    {% for error in registration_form.non_field_errors %}
                                    <p style="color: #ff4300;">{{error|escape}}</p>
                                    {% endfor %}
 
                                    <button id="second_back" type="button" name="previous" class="btn-previous btn-nxt btn btn-secondary" currentLocation="third_bar" prevLocation="second_bar">BACK
                                    </button>
                                    <button type="button" class="btn-nxt btn btn-success pull-right" onclick="validatePass(event)">
                                        SUBMIT
                                    </button>
                                </fieldset>
                            </form>
                            <div class="signup-terms">
                                <p>By signing up you agree to our <a href="{% url 'terms' %}">terms</a>
                                    and <a href="{% url 'privacy_policy' %}">privacy policy</a></p>
                            </div>
                        </div>
                    </div>
                    <div class="signin-link" id="signinLink" style="visibility: hidden">
                        <p class="mt-4">Already have an account? <a href="#" class="signin-link">Sign In</a></p>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="d-none d-lg-block">
    <div class="footer fixed-bottom footer-menu" style="bottom:45px;">
        <p class=""><a href="{% url 'blog:articles_list' %}">Blog</a> | <a  href="{% url 'about' %}">About</a> | <a  href="{% url 'terms' %}">Terms</a> |
            <a href="{% url 'privacy_policy' %}">Privacy Policy</a> | <a href="{% url 'user_feedback' %}">Feedback</a> | <a href="{% url 'help' %}">Help</a></p>
        <p>©Omokaa 2020</p>
    </div>
    </div>
</div>


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script>

    $(document).ready(function () {
        var current = 1, current_step, next_step, steps;
        steps = $("fieldset").length;

        //Navigate sign up form

        $(".btn-next").click(function () {
            current_step = $(this).parent();
            next_step = $(this).parent().next();
            next_step.show();
            current_step.hide();
            
        });
        $(".btn-previous").click(function () {
            const currentLocation = $(this)[0].attributes.currentLocation.value
            const prevLocation = $(this)[0].attributes.prevLocation.value
            current_step = $(this).parent();
            next_step = $(this).parent().prev();
            next_step.show();
            current_step.hide();
            document.getElementById(currentLocation).classList.remove('completed')
            document.getElementById(prevLocation).classList.add('completed')
        });
        setProgressBar(current);

        // Change progress bar action

        function setProgressBar(curStep) {
            var percent = parseFloat(100 / steps) * curStep;
            percent = percent.toFixed();
            $(".progress-bar")
                .css("width", percent + "%")
                .html(percent + "%");
        }

        //Navigate sign in, sign up and reset password

        $(".signup-link").click(function () {
            $("#signinForm").hide();
            $("#forgotForm").hide();
            $("#signupForm").show();
            $("#signinLink").css("visibility", "visible");
        })
        $(".signin-link").click(function () {
            $("#signupForm").hide();
            $("#forgotForm").hide();
            $("#signinForm").show();
            $("#signinLink").css("visibility", "hidden");
        })
        $("#forgotBtn").click(function () {
            $("#signupForm").hide();
            $("#signinForm").hide();
            $("#signinLink").css("visibility", "hidden");
            $("#forgotForm").show();
        })
        $("#signinBtn").click(function () {
            $("#header").hide();
            $("#signinBtn").hide();
            $("#signupBtn").hide();
            $("#signupForm").hide();
            $("#forgotForm").hide();
            $(".account-card").show();
            $("#signinForm").show();
            $("#signinLink").css("visibility", "hidden");
        })
        $("#signupBtn").click(function () {
            $("#header").hide();
            $("#signinBtn").hide();
            $("#signupBtn").hide();
            $("#signupForm").hide();
            $("#forgotForm").hide();
            $(".account-card").show();
            $("#signupForm").show();
            $("#signinLink").css("visibility", "visible");
        })


        if(("{{message}}" != '') || ("{{alert_message}}" != '')){
            $("#signinBtn").click()
        }

        if(('{{registration_form.non_field_errors}}' != '') || ('{{registration_form.password1.errors}}' != '') || ('{{registration_form.password2.errors}}' != '')){
            $("#signupBtn").click()
        }
        else if('{{registration_form.username.errors}}' != ''){
            $("#signupBtn").click()
            document.getElementById('second_back').click()
            document.getElementById('first_back').click()
        }
        else if('{{registration_form.name.errors}}' != ''){
            $("#signupBtn").click()
            document.getElementById('second_back').click()
            document.getElementById('first_back').click()
            
        }
        else if('{{registration_form.email.errors}}' != ''){
            $("#signupBtn").click()
            document.getElementById('second_back').click()
        }
        else if('{{registration_form.phone.errors}}' != ''){
            $("#signupBtn").click()
            document.getElementById('second_back').click()
        }

    });

    function validatePass(event){
        event.preventDefault()
        document.getElementById('nameError').innerHTML = ""
        const pass1 = document.getElementById('password1').value
        const pass2 = document.getElementById('password2').value
        if(pass1 != pass2){
            document.getElementById('passError').innerHTML = "The two password fields didn't match."
            return
        }
        if(pass1.length < 8){
            document.getElementById('passError').innerHTML = "Password length should be greater then 7."
            return
        }
        document.getElementById("registration_form").submit();
    }

    function hasWhiteSpace(s) {
        return s.indexOf(' ') >= 0;
    }

    function ValidateName(event){
            event.preventDefault()
            document.getElementById('nameError').innerHTML = ""
            document.getElementById('userNameError').innerHTML = ""
            const name = document.getElementById('id_name').value.trim()
            const username = document.getElementById('id_username').value.trim()
            const url = document.getElementById('registration_form').attributes.namevalidateurl.value
            var isEmpty = false
            var format = /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/;

            if(name.length === 0){
                isEmpty = true
                document.getElementById('nameError').innerHTML = "Name can't be empty.";
                return;
            }

            if(format.test(name)){
                isEmpty = true
                document.getElementById('nameError').innerHTML = "Name can't contain any special characters."
                return;
            }

            if(hasWhiteSpace(username)){
                isEmpty = true;
                document.getElementById('userNameError').innerHTML = "Username should not contain spaces";
                return;
            }

            if(username.length === 0){
                isEmpty = true;
                document.getElementById('userNameError').innerHTML = "UserName can't be empty.";
                return;
            }

            if(username.length > 30){
                isEmpty = true;
                document.getElementById('userNameError').innerHTML = "Length of username should be less than 30";
                return;
            }

            if(username.includes('@')){
                isEmpty = true
                document.getElementById('userNameError').innerHTML = "Username can't contain @ in it"
                return;
            }

            

            if(!isEmpty){
                document.getElementById('nameSpinner').style.display='inherit'
                $.ajax({
                    url:url,
                    data:{
                        username:username
                    },
                    success:function(data){
                        document.getElementById('nameSpinner').style.display='none'
                        if(data.username){
                            document.getElementById('userNameError').innerHTML = "This username is taken."
                            isEmpty = true
                        }
                        if(!isEmpty){
                            document.getElementById('nameError').innerHTML = ""
                            document.getElementById('userNameError').innerHTML = ""
                            document.getElementById('first_bar').classList.remove('completed')
                            document.getElementById('second_bar').classList.add('completed')
                            current_step = event.target.parentElement;
                            next_step = event.target.parentElement.nextElementSibling;
                            next_step.style.display='inherit';
                            current_step.style.display='none';
                        }
                    },
                    error:function(err){
                        console.log(err)
                        document.getElementById('nameSpinner').style.display='none'      
                    }
                })
            }

    }

    // Method to check if email is valid or not. 
    function validateEmail(email) 
    {
        var re = /\S+@\S+\.\S+/;
        return re.test(email);
    }

    function validatePhone(phone) {
        const re= /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
        return re.test(phone)
    }

    function ValidateEmailPhone(event){
            event.preventDefault()
            document.getElementById('emailError').innerHTML = ''
            document.getElementById('phoneError').innerHTML = ''
            const email = document.getElementById('register_email').value.trim()
            const phone = document.getElementById('id_phone').value.trim()
            const url = document.getElementById('registration_form').attributes.emailvalidateurl.value
            var isEmpty = false


            if(email.length === 0){
                isEmpty = true
                document.getElementById('emailError').innerHTML = "Email can't be empty."
            }
            if(phone.length === 0){
                isEmpty = true;
                document.getElementById('phoneError').innerHTML = "Phone number can't be empty."
            }


            if(!validateEmail(email)){
                isEmpty = true;
                document.getElementById('emailError').innerHTML = "The Email is not valid."
            }

            if(!validatePhone(phone)){
                isEmpty = true;
                document.getElementById('phoneError').innerHTML = "The Phone number is not valid."
            }

            if(!isEmpty){
                document.getElementById('emailSpinner').style.display='inherit'
                $.ajax({
                    url:url,
                    data:{
                        email:email,
                        phone:phone
                    },
                    success:function(data){
                        document.getElementById('emailSpinner').style.display='none'
                        if(data.email){
                            document.getElementById('emailError').innerHTML = 'This Email is already present.'
                            isEmpty = true
                        }
                        if(data.phone){
                            document.getElementById('phoneError').innerHTML = "This phone number is already present."
                            isEmpty = true
                        }
                        if(!isEmpty){
                            document.getElementById('emailError').innerHTML = ""
                            document.getElementById('phoneError').innerHTML = ""
                            document.getElementById('second_bar').classList.remove('completed')
                            document.getElementById('third_bar').classList.add('completed')
                            current_step = event.target.parentElement;
                            next_step = event.target.parentElement.nextElementSibling;
                            next_step.style.display='inherit';
                            current_step.style.display='none';
                        }
                    },
                    error:function(err){
                        console.log(err)
                        document.getElementById('emailSpinner').style.display='none'      
                    }
                })
            }

    }

</script>

{% endblock %}